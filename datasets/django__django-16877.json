{
  "instance_id": "django__django-16877",
  "problem_statement": "New template filter `escapeseq`\nDescription\n\t\nFollowing #34574, and after some conversations within the security team, it seems appropriate to provide a new template filter escapeseq which would be to escape what safeseq is to safe. An example of usage would be:\n{{ some_list|escapeseq|join:\",\" }}\nwhere each item of some_list is escaped before applying the join operation. This usage makes sense in a context where autoescape is off.\n",
  "localized_code": "[start of django/template/defaultfilters.py]\n1: \"\"\"Default variable filters.\"\"\"\n2: import random as random_module\n3: import re\n4: import types\n5: import warnings\n6: from decimal import ROUND_HALF_UP, Context, Decimal, InvalidOperation, getcontext\n7: from functools import wraps\n8: from inspect import unwrap\n9: from operator import itemgetter\n10: from pprint import pformat\n11: from urllib.parse import quote\n12: \n13: from django.utils import formats\n14: from django.utils.dateformat import format, time_format\n15: from django.utils.deprecation import RemovedInDjango51Warning\n16: from django.utils.encoding import iri_to_uri\n17: from django.utils.html import avoid_wrapping, conditional_escape, escape, escapejs\n18: from django.utils.html import json_script as _json_script\n19: from django.utils.html import linebreaks, strip_tags\n20: from django.utils.html import urlize as _urlize\n21: from django.utils.safestring import SafeData, mark_safe\n22: from django.utils.text import Truncator, normalize_newlines, phone2numeric\n23: from django.utils.text import slugify as _slugify\n24: from django.utils.text import wrap\n25: from django.utils.timesince import timesince, timeuntil\n26: from django.utils.translation import gettext, ngettext\n27: \n28: from .base import VARIABLE_ATTRIBUTE_SEPARATOR\n29: from .library import Library\n30: \n31: register = Library()\n32: \n33: \n34: #######################\n35: # STRING DECORATOR    #\n36: #######################\n37: \n38: \n39: def stringfilter(func):\n40:     \"\"\"\n41:     Decorator for filters which should only receive strings. The object\n42:     passed as the first positional argument will be converted to a string.\n43:     \"\"\"\n44: \n45:     @wraps(func)\n46:     def _dec(first, *args, **kwargs):\n47:         first = str(first)\n48:         result = func(first, *args, **kwargs)\n49:         if isinstance(first, SafeData) and getattr(unwrap(func), \"is_safe\", False):\n50:             result = mark_safe(result)\n51:         return result\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/django/template/defaultfilters.py",
      "suspect_lines": []
    }
  ]
}
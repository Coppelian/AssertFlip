{
  "instance_id": "sympy__sympy-14976",
  "problem_statement": "lambdify(modules='mpmath') doesn't wrap rationals\n```py\r\n>>> eqn = Eq(rf(18,x), 77 + S(1)/3)\r\n>>> f = lambdify(x, eqn.lhs - eqn.rhs, 'mpmath')\r\n>>> print(inspect.getsource(f))\r\ndef _lambdifygenerated(x):\r\n    return (  # Not supported in Python:\r\n  # RisingFactorial\r\nRisingFactorial(18, x) - 232/3)\r\n```\r\n\r\nThis results in reduced precision results from `nsolve`, because the 232/3 isn't evaluated at full precision. \r\n\r\n```py\r\n>>> eqn = Eq(rf(18,x), 77 + S(1)/3)\r\n>>> x0 = nsolve(eqn, Float('1.5', 64), prec=64)\r\n>>> rf(18, x0).evalf(64)\r\n77.33333333333332859638176159933209419250488281250000000000000000\r\n```\r\n\r\nOriginally reported at https://github.com/sympy/sympy/pull/14971\n",
  "localized_code": "[start of sympy/printing/pycode.py]\n1: \"\"\"\n2: Python code printers\n3: \n4: This module contains python code printers for plain python as well as NumPy & SciPy enabled code.\n5: \"\"\"\n6: \n7: \n8: from collections import defaultdict\n9: from functools import wraps\n10: from itertools import chain\n11: from sympy.core import sympify, S\n12: from .precedence import precedence\n13: from .codeprinter import CodePrinter\n14: \n15: _kw_py2and3 = {\n16:     'and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif',\n17:     'else', 'except', 'finally', 'for', 'from', 'global', 'if', 'import', 'in',\n18:     'is', 'lambda', 'not', 'or', 'pass', 'raise', 'return', 'try', 'while',\n19:     'with', 'yield', 'None'  # 'None' is actually not in Python 2's keyword.kwlist\n20: }\n21: _kw_only_py2 = {'exec', 'print'}\n22: _kw_only_py3 = {'False', 'nonlocal', 'True'}\n23: \n24: _known_functions = {\n25:     'Abs': 'abs',\n26: }\n27: _known_functions_math = {\n28:     'acos': 'acos',\n29:     'acosh': 'acosh',\n30:     'asin': 'asin',\n31:     'asinh': 'asinh',\n32:     'atan': 'atan',\n33:     'atan2': 'atan2',\n34:     'atanh': 'atanh',\n35:     'ceiling': 'ceil',\n36:     'cos': 'cos',\n37:     'cosh': 'cosh',\n38:     'erf': 'erf',\n39:     'erfc': 'erfc',\n40:     'exp': 'exp',\n41:     'expm1': 'expm1',\n42:     'factorial': 'factorial',\n43:     'floor': 'floor',\n44:     'gamma': 'gamma',\n45:     'hypot': 'hypot',\n46:     'loggamma': 'lgamma',\n47:     'log': 'log',\n48:     'log10': 'log10',\n49:     'log1p': 'log1p',\n50:     'log2': 'log2',\n51:     'sin': 'sin',\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/sympy/printing/pycode.py",
      "suspect_lines": []
    }
  ]
}
{
  "instance_id": "django__django-11211",
  "problem_statement": "Prefetch related is not working when used GFK for model that uses UUID field as PK.\nDescription\n\t\nHow to reproduce:\ncreate model with UUID as primary key\nclass Foo(models.Model):\n\tid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n\t...\ncreate another model with GFK to model Foo\nclass Bar(models.Model):\n\tfoo_content_type = models.ForeignKey(\n\t\tContentType, related_name='actor',\n\t\ton_delete=models.CASCADE, db_index=True\n\t)\n\tfoo_object_id = models.CharField(max_length=255, db_index=True)\n\tfoo = GenericForeignKey('foo_content_type', 'foo_object_id')\n\t...\nand try to get queryset with prefetch related (django orm engine return None for attribute foo):\nBar.objects.all().prefetch_related('foo')\nThanks a lot for your attention! Also i wanna point out some related bug report from third party library in which previously i faced with that issue, maybe it would useful – ​https://github.com/justquick/django-activity-stream/issues/245\n",
  "localized_code": "[start of django/db/models/fields/__init__.py]\n1: import collections.abc\n2: import copy\n3: import datetime\n4: import decimal\n5: import operator\n6: import uuid\n7: import warnings\n8: from base64 import b64decode, b64encode\n9: from functools import partialmethod, total_ordering\n10: \n11: from django import forms\n12: from django.apps import apps\n13: from django.conf import settings\n14: from django.core import checks, exceptions, validators\n15: # When the _meta object was formalized, this exception was moved to\n16: # django.core.exceptions. It is retained here for backwards compatibility\n17: # purposes.\n18: from django.core.exceptions import FieldDoesNotExist  # NOQA\n19: from django.db import connection, connections, router\n20: from django.db.models.constants import LOOKUP_SEP\n21: from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin\n22: from django.utils import timezone\n23: from django.utils.datastructures import DictWrapper\n24: from django.utils.dateparse import (\n25:     parse_date, parse_datetime, parse_duration, parse_time,\n26: )\n27: from django.utils.duration import duration_microseconds, duration_string\n28: from django.utils.functional import Promise, cached_property\n29: from django.utils.ipv6 import clean_ipv6_address\n30: from django.utils.itercompat import is_iterable\n31: from django.utils.text import capfirst\n32: from django.utils.translation import gettext_lazy as _\n33: \n34: __all__ = [\n35:     'AutoField', 'BLANK_CHOICE_DASH', 'BigAutoField', 'BigIntegerField',\n36:     'BinaryField', 'BooleanField', 'CharField', 'CommaSeparatedIntegerField',\n37:     'DateField', 'DateTimeField', 'DecimalField', 'DurationField',\n38:     'EmailField', 'Empty', 'Field', 'FieldDoesNotExist', 'FilePathField',\n39:     'FloatField', 'GenericIPAddressField', 'IPAddressField', 'IntegerField',\n40:     'NOT_PROVIDED', 'NullBooleanField', 'PositiveIntegerField',\n41:     'PositiveSmallIntegerField', 'SlugField', 'SmallIntegerField', 'TextField',\n42:     'TimeField', 'URLField', 'UUIDField',\n43: ]\n44: \n45: \n46: class Empty:\n47:     pass\n48: \n49: \n50: class NOT_PROVIDED:\n51:     pass\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/django/db/models/fields/__init__.py",
      "suspect_lines": []
    }
  ]
}
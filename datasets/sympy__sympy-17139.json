{
  "instance_id": "sympy__sympy-17139",
  "problem_statement": "simplify(cos(x)**I): Invalid comparison of complex I (fu.py)\n```\r\n>>> from sympy import *\r\n>>> x = Symbol('x')\r\n>>> print(simplify(cos(x)**I))\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/e/se/sympy/simplify/simplify.py\", line 587, in simplify\r\n    expr = trigsimp(expr, deep=True)\r\n  File \"/home/e/se/sympy/simplify/trigsimp.py\", line 508, in trigsimp\r\n    return trigsimpfunc(expr)\r\n  File \"/home/e/se/sympy/simplify/trigsimp.py\", line 501, in <lambda>\r\n    'matching': (lambda x: futrig(x)),\r\n  File \"/home/e/se/sympy/simplify/trigsimp.py\", line 1101, in futrig\r\n    e = bottom_up(e, lambda x: _futrig(x, **kwargs))\r\n  File \"/home/e/se/sympy/simplify/simplify.py\", line 1081, in bottom_up\r\n    rv = F(rv)\r\n  File \"/home/e/se/sympy/simplify/trigsimp.py\", line 1101, in <lambda>\r\n    e = bottom_up(e, lambda x: _futrig(x, **kwargs))\r\n  File \"/home/e/se/sympy/simplify/trigsimp.py\", line 1169, in _futrig\r\n    e = greedy(tree, objective=Lops)(e)\r\n  File \"/home/e/se/sympy/strategies/core.py\", line 115, in minrule\r\n    return min([rule(expr) for rule in rules], key=objective)\r\n  File \"/home/e/se/sympy/strategies/core.py\", line 115, in <listcomp>\r\n    return min([rule(expr) for rule in rules], key=objective)\r\n  File \"/home/e/se/sympy/strategies/core.py\", line 44, in chain_rl\r\n    expr = rule(expr)\r\n  File \"/home/e/se/sympy/simplify/fu.py\", line 566, in TR6\r\n    return _TR56(rv, cos, sin, lambda x: 1 - x, max=max, pow=pow)\r\n  File \"/home/e/se/sympy/simplify/fu.py\", line 524, in _TR56\r\n    return bottom_up(rv, _f)\r\n  File \"/home/e/se/sympy/simplify/simplify.py\", line 1081, in bottom_up\r\n    rv = F(rv)\r\n  File \"/home/e/se/sympy/simplify/fu.py\", line 504, in _f\r\n    if (rv.exp < 0) == True:\r\n  File \"/home/e/se/sympy/core/expr.py\", line 406, in __lt__\r\n    raise TypeError(\"Invalid comparison of complex %s\" % me)\r\nTypeError: Invalid comparison of complex I\r\n```\n",
  "localized_code": "[start of sympy/simplify/fu.py]\n1: \"\"\"\n2: Implementation of the trigsimp algorithm by Fu et al.\n3: \n4: The idea behind the ``fu`` algorithm is to use a sequence of rules, applied\n5: in what is heuristically known to be a smart order, to select a simpler\n6: expression that is equivalent to the input.\n7: \n8: There are transform rules in which a single rule is applied to the\n9: expression tree. The following are just mnemonic in nature; see the\n10: docstrings for examples.\n11: \n12:     TR0 - simplify expression\n13:     TR1 - sec-csc to cos-sin\n14:     TR2 - tan-cot to sin-cos ratio\n15:     TR2i - sin-cos ratio to tan\n16:     TR3 - angle canonicalization\n17:     TR4 - functions at special angles\n18:     TR5 - powers of sin to powers of cos\n19:     TR6 - powers of cos to powers of sin\n20:     TR7 - reduce cos power (increase angle)\n21:     TR8 - expand products of sin-cos to sums\n22:     TR9 - contract sums of sin-cos to products\n23:     TR10 - separate sin-cos arguments\n24:     TR10i - collect sin-cos arguments\n25:     TR11 - reduce double angles\n26:     TR12 - separate tan arguments\n27:     TR12i - collect tan arguments\n28:     TR13 - expand product of tan-cot\n29:     TRmorrie - prod(cos(x*2**i), (i, 0, k - 1)) -> sin(2**k*x)/(2**k*sin(x))\n30:     TR14 - factored powers of sin or cos to cos or sin power\n31:     TR15 - negative powers of sin to cot power\n32:     TR16 - negative powers of cos to tan power\n33:     TR22 - tan-cot powers to negative powers of sec-csc functions\n34:     TR111 - negative sin-cos-tan powers to csc-sec-cot\n35: \n36: There are 4 combination transforms (CTR1 - CTR4) in which a sequence of\n37: transformations are applied and the simplest expression is selected from\n38: a few options.\n39: \n40: Finally, there are the 2 rule lists (RL1 and RL2), which apply a\n41: sequence of transformations and combined transformations, and the ``fu``\n42: algorithm itself, which applies rules and rule lists and selects the\n43: best expressions. There is also a function ``L`` which counts the number\n44: of trigonometric functions that appear in the expression.\n45: \n46: Other than TR0, re-writing of expressions is not done by the transformations.\n47: e.g. TR10i finds pairs of terms in a sum that are in the form like\n48: ``cos(x)*cos(y) + sin(x)*sin(y)``. Such expression are targeted in a bottom-up\n49: traversal of the expression, but no manipulation to make them appear is\n50: attempted. For example,\n51: \n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/sympy/simplify/fu.py",
      "suspect_lines": []
    }
  ]
}
{
  "instance_id": "scikit-learn__scikit-learn-13779",
  "problem_statement": "Voting estimator will fail at fit if weights are passed and an estimator is None\nBecause we don't check for an estimator to be `None` in `sample_weight` support, `fit` is failing`.\r\n\r\n```python\r\n    X, y = load_iris(return_X_y=True)\r\n    voter = VotingClassifier(\r\n        estimators=[('lr', LogisticRegression()),\r\n                    ('rf', RandomForestClassifier())]\r\n    )\r\n    voter.fit(X, y, sample_weight=np.ones(y.shape))\r\n    voter.set_params(lr=None)\r\n    voter.fit(X, y, sample_weight=np.ones(y.shape))\r\n```\r\n\r\n```\r\nAttributeError: 'NoneType' object has no attribute 'fit'\r\n```\n",
  "localized_code": "[start of sklearn/ensemble/voting.py]\n1: \"\"\"\n2: Soft Voting/Majority Rule classifier and Voting regressor.\n3: \n4: This module contains:\n5:  - A Soft Voting/Majority Rule classifier for classification estimators.\n6:  - A Voting regressor for regression estimators.\n7: \"\"\"\n8: \n9: # Authors: Sebastian Raschka <se.raschka@gmail.com>,\n10: #          Gilles Louppe <g.louppe@gmail.com>,\n11: #          Ramil Nugmanov <stsouko@live.ru>\n12: #          Mohamed Ali Jamaoui <m.ali.jamaoui@gmail.com>\n13: #\n14: # License: BSD 3 clause\n15: \n16: import numpy as np\n17: from abc import abstractmethod\n18: \n19: from ..base import ClassifierMixin\n20: from ..base import RegressorMixin\n21: from ..base import TransformerMixin\n22: from ..base import clone\n23: from ..preprocessing import LabelEncoder\n24: from ..utils._joblib import Parallel, delayed\n25: from ..utils.validation import has_fit_parameter, check_is_fitted\n26: from ..utils.metaestimators import _BaseComposition\n27: from ..utils import Bunch\n28: \n29: \n30: def _parallel_fit_estimator(estimator, X, y, sample_weight=None):\n31:     \"\"\"Private function used to fit an estimator within a job.\"\"\"\n32:     if sample_weight is not None:\n33:         estimator.fit(X, y, sample_weight=sample_weight)\n34:     else:\n35:         estimator.fit(X, y)\n36:     return estimator\n37: \n38: \n39: class _BaseVoting(_BaseComposition, TransformerMixin):\n40:     \"\"\"Base class for voting.\n41: \n42:     Warning: This class should not be used directly. Use derived classes\n43:     instead.\n44:     \"\"\"\n45:     _required_parameters = ['estimators']\n46: \n47:     @property\n48:     def named_estimators(self):\n49:         return Bunch(**dict(self.estimators))\n50: \n51:     @property\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/sklearn/ensemble/voting.py",
      "suspect_lines": []
    }
  ]
}
{
  "instance_id": "astropy__astropy-14182",
  "problem_statement": "Please support header rows in RestructuredText output\n### Description\r\n\r\nIt would be great if the following would work:\r\n\r\n```Python\r\n>>> from astropy.table import QTable\r\n>>> import astropy.units as u\r\n>>> import sys\r\n>>> tbl = QTable({'wave': [350,950]*u.nm, 'response': [0.7, 1.2]*u.count})\r\n>>> tbl.write(sys.stdout,  format=\"ascii.rst\")\r\n===== ========\r\n wave response\r\n===== ========\r\n350.0      0.7\r\n950.0      1.2\r\n===== ========\r\n>>> tbl.write(sys.stdout,  format=\"ascii.fixed_width\", header_rows=[\"name\", \"unit\"])\r\n|  wave | response |\r\n|    nm |       ct |\r\n| 350.0 |      0.7 |\r\n| 950.0 |      1.2 |\r\n>>> tbl.write(sys.stdout,  format=\"ascii.rst\", header_rows=[\"name\", \"unit\"])\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/lib/python3/dist-packages/astropy/table/connect.py\", line 129, in __call__\r\n    self.registry.write(instance, *args, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/astropy/io/registry/core.py\", line 369, in write\r\n    return writer(data, *args, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/astropy/io/ascii/connect.py\", line 26, in io_write\r\n    return write(table, filename, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/astropy/io/ascii/ui.py\", line 856, in write\r\n    writer = get_writer(Writer=Writer, fast_writer=fast_writer, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/astropy/io/ascii/ui.py\", line 800, in get_writer\r\n    writer = core._get_writer(Writer, fast_writer, **kwargs)\r\n  File \"/usr/lib/python3/dist-packages/astropy/io/ascii/core.py\", line 1719, in _get_writer\r\n    writer = Writer(**writer_kwargs)\r\nTypeError: RST.__init__() got an unexpected keyword argument 'header_rows'\r\n```\r\n\r\n\r\n### Additional context\r\n\r\nRestructuredText output is a great way to fill autogenerated documentation with content, so having this flexible makes the life easier `:-)`\r\n\r\n\n",
  "localized_code": "[start of astropy/io/ascii/rst.py]\n1: # Licensed under a 3-clause BSD style license\n2: \"\"\"\n3: :Author: Simon Gibbons (simongibbons@gmail.com)\n4: \"\"\"\n5: \n6: \n7: from .core import DefaultSplitter\n8: from .fixedwidth import (\n9:     FixedWidth,\n10:     FixedWidthData,\n11:     FixedWidthHeader,\n12:     FixedWidthTwoLineDataSplitter,\n13: )\n14: \n15: \n16: class SimpleRSTHeader(FixedWidthHeader):\n17:     position_line = 0\n18:     start_line = 1\n19:     splitter_class = DefaultSplitter\n20:     position_char = \"=\"\n21: \n22:     def get_fixedwidth_params(self, line):\n23:         vals, starts, ends = super().get_fixedwidth_params(line)\n24:         # The right hand column can be unbounded\n25:         ends[-1] = None\n26:         return vals, starts, ends\n27: \n28: \n29: class SimpleRSTData(FixedWidthData):\n30:     start_line = 3\n31:     end_line = -1\n32:     splitter_class = FixedWidthTwoLineDataSplitter\n33: \n34: \n35: class RST(FixedWidth):\n36:     \"\"\"reStructuredText simple format table.\n37: \n38:     See: https://docutils.sourceforge.io/docs/ref/rst/restructuredtext.html#simple-tables\n39: \n40:     Example::\n41: \n42:         ==== ===== ======\n43:         Col1  Col2  Col3\n44:         ==== ===== ======\n45:           1    2.3  Hello\n46:           2    4.5  Worlds\n47:         ==== ===== ======\n48: \n49:     Currently there is no support for reading tables which utilize continuation lines,\n50:     or for ones which define column spans through the use of an additional\n51:     line of dashes in the header.\n52: \n53:     \"\"\"\n54: \n55:     _format_name = \"rst\"\n56:     _description = \"reStructuredText simple table\"\n57:     data_class = SimpleRSTData\n58:     header_class = SimpleRSTHeader\n59: \n60:     def __init__(self):\n61:         super().__init__(delimiter_pad=None, bookend=False)\n62: \n63:     def write(self, lines):\n64:         lines = super().write(lines)\n65:         lines = [lines[1]] + lines + [lines[1]]\n66:         return lines\n\n",
  "line_level_localization": [
    {
      "filename": "/astropy/io/ascii/rst.py",
      "suspect_lines": [
        30,
        42,
        43,
        44,
        45,
        46,
        47,
        60,
        61,
        65
      ]
    }
  ]
}
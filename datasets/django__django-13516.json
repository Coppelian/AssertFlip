{
  "instance_id": "django__django-13516",
  "problem_statement": "flush() on self.stdout/stderr management commands doesn't work.\nDescription\n\t\nflush() is notably called during migrate command; it doesn't work, and a long migration effectively prints to stderr no relevant information up until the end:\nOperations to perform:\n Apply all migrations: myapp\nRunning migrations:\nThen nothing more, but the migration is being done.\nThen at the end of the real migration, the rest is flushed:\n Applying myapp.0002_auto_20200817_1030... OK\nExpected behavior:\nOperations to perform:\n Apply all migrations: myapp\nRunning migrations:\n Applying myapp.0002_auto_20200817_1030...\nthen work\nthen OK\n",
  "localized_code": "[start of django/core/management/base.py]\n1: \"\"\"\n2: Base classes for writing management commands (named commands which can\n3: be executed through ``django-admin`` or ``manage.py``).\n4: \"\"\"\n5: import os\n6: import sys\n7: import warnings\n8: from argparse import ArgumentParser, HelpFormatter\n9: from io import TextIOBase\n10: \n11: import django\n12: from django.core import checks\n13: from django.core.exceptions import ImproperlyConfigured\n14: from django.core.management.color import color_style, no_style\n15: from django.db import DEFAULT_DB_ALIAS, connections\n16: from django.utils.deprecation import RemovedInDjango41Warning\n17: \n18: ALL_CHECKS = '__all__'\n19: \n20: \n21: class CommandError(Exception):\n22:     \"\"\"\n23:     Exception class indicating a problem while executing a management\n24:     command.\n25: \n26:     If this exception is raised during the execution of a management\n27:     command, it will be caught and turned into a nicely-printed error\n28:     message to the appropriate output stream (i.e., stderr); as a\n29:     result, raising this exception (with a sensible description of the\n30:     error) is the preferred way to indicate that something has gone\n31:     wrong in the execution of a command.\n32:     \"\"\"\n33:     def __init__(self, *args, returncode=1, **kwargs):\n34:         self.returncode = returncode\n35:         super().__init__(*args, **kwargs)\n36: \n37: \n38: class SystemCheckError(CommandError):\n39:     \"\"\"\n40:     The system check framework detected unrecoverable errors.\n41:     \"\"\"\n42:     pass\n43: \n44: \n45: class CommandParser(ArgumentParser):\n46:     \"\"\"\n47:     Customized ArgumentParser class to improve some error messages and prevent\n48:     SystemExit in several occasions, as SystemExit is unacceptable when a\n49:     command is called programmatically.\n50:     \"\"\"\n51:     def __init__(self, *, missing_args_message=None, called_from_command_line=None, **kwargs):\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/django/core/management/base.py",
      "suspect_lines": []
    }
  ]
}
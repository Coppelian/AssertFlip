{
  "instance_id": "django__django-11179",
  "problem_statement": "delete() on instances of models without any dependencies doesn't clear PKs.\nDescription\n\t\nDeleting any model with no dependencies not updates the PK on the model. It should be set to None after .delete() call.\nSee Django.db.models.deletion:276-281. Should update the model line 280.\n",
  "localized_code": "[start of django/db/models/deletion.py]\n1: from collections import Counter\n2: from operator import attrgetter\n3: \n4: from django.db import IntegrityError, connections, transaction\n5: from django.db.models import signals, sql\n6: \n7: \n8: class ProtectedError(IntegrityError):\n9:     def __init__(self, msg, protected_objects):\n10:         self.protected_objects = protected_objects\n11:         super().__init__(msg, protected_objects)\n12: \n13: \n14: def CASCADE(collector, field, sub_objs, using):\n15:     collector.collect(sub_objs, source=field.remote_field.model,\n16:                       source_attr=field.name, nullable=field.null)\n17:     if field.null and not connections[using].features.can_defer_constraint_checks:\n18:         collector.add_field_update(field, None, sub_objs)\n19: \n20: \n21: def PROTECT(collector, field, sub_objs, using):\n22:     raise ProtectedError(\n23:         \"Cannot delete some instances of model '%s' because they are \"\n24:         \"referenced through a protected foreign key: '%s.%s'\" % (\n25:             field.remote_field.model.__name__, sub_objs[0].__class__.__name__, field.name\n26:         ),\n27:         sub_objs\n28:     )\n29: \n30: \n31: def SET(value):\n32:     if callable(value):\n33:         def set_on_delete(collector, field, sub_objs, using):\n34:             collector.add_field_update(field, value(), sub_objs)\n35:     else:\n36:         def set_on_delete(collector, field, sub_objs, using):\n37:             collector.add_field_update(field, value, sub_objs)\n38:     set_on_delete.deconstruct = lambda: ('django.db.models.SET', (value,), {})\n39:     return set_on_delete\n40: \n41: \n42: def SET_NULL(collector, field, sub_objs, using):\n43:     collector.add_field_update(field, None, sub_objs)\n44: \n45: \n46: def SET_DEFAULT(collector, field, sub_objs, using):\n47:     collector.add_field_update(field, field.get_default(), sub_objs)\n48: \n49: \n50: def DO_NOTHING(collector, field, sub_objs, using):\n51:     pass\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/django/db/models/deletion.py",
      "suspect_lines": []
    }
  ]
}
{
  "instance_id": "django__django-15851",
  "problem_statement": "dbshell additional parameters should be passed before dbname on PostgreSQL.\nDescription\n\t\npsql expects all options to proceed the database name, if provided. So, if doing something like `./manage.py dbshell -- -c \"select * from some_table;\" one will get this:\n$ ./manage.py dbshell -- -c \"select * from some_table;\"\npsql: warning: extra command-line argument \"-c\" ignored\npsql: warning: extra command-line argument \"select * from some_table;\" ignored\npsql (10.21)\nType \"help\" for help.\nsome_database=>\nIt appears the args list just need to be constructed in the proper order, leaving the database name for the end of the args list.\n",
  "localized_code": "[start of django/db/backends/postgresql/client.py]\n1: import signal\n2: \n3: from django.db.backends.base.client import BaseDatabaseClient\n4: \n5: \n6: class DatabaseClient(BaseDatabaseClient):\n7:     executable_name = \"psql\"\n8: \n9:     @classmethod\n10:     def settings_to_cmd_args_env(cls, settings_dict, parameters):\n11:         args = [cls.executable_name]\n12:         options = settings_dict.get(\"OPTIONS\", {})\n13: \n14:         host = settings_dict.get(\"HOST\")\n15:         port = settings_dict.get(\"PORT\")\n16:         dbname = settings_dict.get(\"NAME\")\n17:         user = settings_dict.get(\"USER\")\n18:         passwd = settings_dict.get(\"PASSWORD\")\n19:         passfile = options.get(\"passfile\")\n20:         service = options.get(\"service\")\n21:         sslmode = options.get(\"sslmode\")\n22:         sslrootcert = options.get(\"sslrootcert\")\n23:         sslcert = options.get(\"sslcert\")\n24:         sslkey = options.get(\"sslkey\")\n25: \n26:         if not dbname and not service:\n27:             # Connect to the default 'postgres' db.\n28:             dbname = \"postgres\"\n29:         if user:\n30:             args += [\"-U\", user]\n31:         if host:\n32:             args += [\"-h\", host]\n33:         if port:\n34:             args += [\"-p\", str(port)]\n35:         if dbname:\n36:             args += [dbname]\n37:         args.extend(parameters)\n38: \n39:         env = {}\n40:         if passwd:\n41:             env[\"PGPASSWORD\"] = str(passwd)\n42:         if service:\n43:             env[\"PGSERVICE\"] = str(service)\n44:         if sslmode:\n45:             env[\"PGSSLMODE\"] = str(sslmode)\n46:         if sslrootcert:\n47:             env[\"PGSSLROOTCERT\"] = str(sslrootcert)\n48:         if sslcert:\n49:             env[\"PGSSLCERT\"] = str(sslcert)\n50:         if sslkey:\n51:             env[\"PGSSLKEY\"] = str(sslkey)\n... Code Truncated ...\n\n",
  "line_level_localization": [
    {
      "filename": "/django/db/backends/postgresql/client.py",
      "suspect_lines": [
        37
      ]
    }
  ]
}